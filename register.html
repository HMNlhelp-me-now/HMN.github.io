<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>สมัครเจ้าหน้าที่ | SOS</title>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <script src="js/firebase.js"></script>

  <!-- ✅ เรียกใช้ CSS -->
  <link rel="stylesheet" href="css/register.css">
</head>
<body>

  <div class="register-container">
    <h2>สมัครเจ้าหน้าที่</h2>
    <input id="name" placeholder="ชื่อ">
    <input id="phone" placeholder="เบอร์โทร">
    <input id="email" placeholder="อีเมล">
    <input id="work" placeholder="หน้าที่งาน">
    <input id="password" type="password" placeholder="รหัสผ่าน">
    <button onclick="register()">สมัคร</button>
    <div class="link-text">
      มีบัญชีอยู่แล้ว? <a href="login.html">เข้าสู่ระบบ</a>
    </div>
  </div>

  <script>
    function register() {
      const nameVal = document.getElementById("name").value;
      const phoneVal = document.getElementById("phone").value;
      const emailVal = document.getElementById("email").value;
      const workVal = document.getElementById("work").value;
      const passVal = document.getElementById("password").value;

      firebase.auth().createUserWithEmailAndPassword(emailVal, passVal)
      .then(cred => {
        const uid = cred.user.uid;
        firebase.database().ref("users/" + uid).set({
          name: nameVal,
          phone: phoneVal,
          email: emailVal,
          job: workVal,
          role: "responder",
          approved: false
        });
        alert("สมัครสำเร็จ! รอแอดมินอนุมัติ");
      })
      .catch(err => {
        alert(err.message);
      });
    }
  </script>

</body>
</html>
